<mat-card appearance="outlined">
	<mat-card-header>
		<mat-card-title>Administrar usuarios</mat-card-title>
		<mat-card-subtitle>Administrar usuarios, permisos y contrase√±as</mat-card-subtitle>
	</mat-card-header>
	<mat-card-content>
		<!-- RBAC management UI: toggle between views, create button, and a table list -->

		<div style="display:flex; flex-direction:column; gap:8px;">
			<!-- View selector as a solo button + hyperlink, aligned with the Create button -->
			<div style="display:flex; gap:12px; align-items:center; justify-content:space-between; width:100%;">
				<div style="display:flex; gap:8px; align-items:center;">
					<!-- Solo button that opens a small menu to choose the view -->
					<button mat-icon-button [matMenuTriggerFor]="viewMenu" aria-label="Seleccionar vista"><mat-icon>arrow_drop_down</mat-icon></button>
					<!-- Hyperlink showing the current view label -->
					<a href="#" (click)="$event.preventDefault()" style="font-weight:600; text-decoration:underline; cursor:pointer; color:inherit">{{ getViewLabel(currentView) }}</a>
				</div>

				<div style="display:flex; gap:8px; align-items:center;">
					<div style="font-size:13px; opacity:.8; white-space:nowrap">Vista: <strong>{{currentView}}</strong></div>
					<button mat-stroked-button color="primary" style="font-size:13px; padding:6px 10px;" (click)="create()">Crear</button>
				</div>
			</div>

			<!-- Table list: Column1 | Column2 | Actions -->
			<div>
				<table class="mat-elevation-z1" style="width:100%; border-collapse:collapse;">
					<thead>
						<tr style="text-align:left; background:rgba(0,0,0,0.02);">
							<th style="padding:12px 8px;">Columna 1</th>
							<th style="padding:12px 8px;">Columna 2</th>
							<th style="padding:12px 8px; width:72px;">Acciones</th>
						</tr>
					</thead>
					<tbody>
						<!-- Rows are generated from component `items` -->
						<tr *ngFor="let it of items">
							<td style="padding:12px 8px;">{{ it.col1 }}</td>
							<td style="padding:12px 8px;">{{ it.col2 }}</td>
							<td style="padding:8px;">
								<!-- store the selected item before opening the menu -->
								<button mat-icon-button (click)="selectedItem = it" [matMenuTriggerFor]="actionMenu"><mat-icon>more_vert</mat-icon></button>
							</td>
						</tr>
					</tbody>
				</table>

				<!-- Shared actions menu for rows -->
				<mat-menu #actionMenu="matMenu">
					<button mat-menu-item (click)="edit(selectedItem)">
						<mat-icon>edit</mat-icon>
						<span>Editar</span>
					</button>
					<button mat-menu-item (click)="delete(selectedItem)">
						<mat-icon>delete</mat-icon>
						<span>Eliminar</span>
					</button>
					<button mat-menu-item (click)="view(selectedItem)">
						<mat-icon>visibility</mat-icon>
						<span>Ver</span>
					</button>
				</mat-menu>
        
				<!-- Menu for selecting view (users/roles/namespaces/processes) -->
				<mat-menu #viewMenu="matMenu">
					<button mat-menu-item (click)="changeView('users')">Usuarios</button>
					<button mat-menu-item (click)="changeView('roles')">Roles</button>
					<button mat-menu-item (click)="changeView('namespaces')">Namespaces</button>
					<button mat-menu-item (click)="changeView('processes')">Procesos</button>
				</mat-menu>
			</div>
		</div>
	</mat-card-content>
</mat-card>
